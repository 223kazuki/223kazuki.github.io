<!DOCTYPE html>
<html itemtype="http://schema.org/Blog" lang="en"><head><title>223Log</title><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="/css/normalize.css" rel="stylesheet"><link href="https://unpkg.com/basscss@8.0.2/css/basscss.min.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"></head><body><header class="fixed top-0 fit col-12"><p class="center"><a href="/">223 Log</a></p></header><div class="content mx-auto mt4"><div class="clearfix"><div><h1><a href="#20170911" id="20170911"></a>2017/09/11</h1>
<pre><code>(set-env!
  :source-paths #{&quot;src&quot;}
  :resource-paths #{&quot;resources&quot;}
  :target-path #{&quot;../223kazuki.github.io&quot;}
  :dependencies '[[perun &quot;0.4.2-SNAPSHOT&quot;]
                  [hiccup &quot;1.0.5&quot;]
                  [pandeiro/boot-http &quot;0.6.3-SNAPSHOT&quot;]])

(require '[clojure.string :as str]
         '[io.perun :refer :all]
         '[pandeiro.boot-http :refer [serve]])

(task-options!
  markdown   {:out-dir &quot;./&quot;}
  render     {:out-dir &quot;./&quot;}
  collection {:out-dir &quot;./&quot;}
  static     {:out-dir &quot;./&quot;}
  serve      {:resource-root &quot;./&quot;})

(deftask build
  []
  (comp (global-metadata)
        (markdown)
        (draft)
        (print-meta)
        ;; (slug)
        (ttr)
        (word-count)
        (build-date)
        (gravatar :source-key :author-email :target-key :author-gravatar)
        (render :renderer 'io.github.223kazuki.core/render)
        (collection :renderer 'io.github.223kazuki.index/render :page &quot;index.html&quot;)
        ;; (tags :renderer 'io.github.223kazuki.index.tags/render)
        ;; (paginate :renderer 'io.github.223kazuki.index.paginate/render)
        ;; (assortment :renderer 'io.github.223kazuki.index.assortment/render
        ;;             :grouper (fn [entries]
        ;;                        (-&gt;&gt; entries
        ;;                             (mapcat (fn [entry]
        ;;                                       (if-let [kws (:keywords entry)]
        ;;                                         (map #(-&gt; [% entry]) (str/split kws #&quot;\s*,\s*&quot;))
        ;;                                         [])))
        ;;                             (reduce (fn [result [kw entry]]
        ;;                                       (let [path (str kw &quot;.html&quot;)]
        ;;                                         (-&gt; result
        ;;                                             (update-in [path :entries] conj entry)
        ;;                                             (assoc-in [path :entry :keyword] kw))))
        ;;                                     {}))))
        (static :renderer 'io.github.223kazuki.about/render :page &quot;about.html&quot;)
        ;; (inject-scripts :scripts #{&quot;start.js&quot;})
        (sitemap :out-dir &quot;./&quot;)
        (rss :description &quot;Hashobject blog&quot; :out-dir &quot;./&quot;)
        ;; (atom-feed :filterer :original :out-dir &quot;./&quot;)
        (print-meta)
        (target :dir #{&quot;../223kazuki.github.io&quot;})
        (notify)))

(deftask dev
  []
  (comp (watch)
        (build)
        (serve)))
</code></pre>
</div></div></div><footer class="col-12"><ul class="center list-reset"><li class="inline-block mr1"><a href="/about.html">About</a></li><li class="inline-block mr1">/</li><li class="inline-block mr1"><a href="/feed.rss">RSS</a></li><li class="inline-block mr1">/</li><li class="inline-block mr1"><a href="/posts.html">Posts</a></li></ul></footer><script>console.log('Hello world');
</script></body></html>